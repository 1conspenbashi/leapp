<div class="container-fluid">

  <app-profile-sidebar></app-profile-sidebar>

  <div class="menu-bar">
    <a class="btn-group {{showOnly === 'AWS' ? 'active' : ''}} btn-left" (click)="setVisibility('AWS');">AWS</a>
    <a class="btn-group {{showOnly === 'AZURE' ? 'active' : ''}} btn-center" (click)="setVisibility('AZURE');">AZR</a>
    <a class="btn-group {{showOnly === 'ALL' ? 'active' : ''}} btn-right" (click)="setVisibility('ALL');">ALL</a>

    <a (click)="createAccount();" tooltip="Create Account" class="small-btn"><img src="assets/images/plus-light.png" width="14"/></a>

    <span class="search-bar">
      <input type="text" (change)="filterSessions($event.target)" placeholder="search..."/>
    </span>
  </div>

  <ul class="ssm-cards">
    <ng-container *ngFor="let session of sessions">
    <li class="session-card" *ngIf="(showOnly === 'ALL') || (session.accountData.subscriptionId ? showOnly === 'AZR' : showOnly === 'AWS')">
        <div class="mycard">
          <div class="button-area">
            <span class="information">
              {{session.accountData.subscriptionId ? 'AZR' : 'AWS'}} |
              {{session.accountData.accountName}} |
              {{session.roleData.name ? session.roleData.name.substr(0, 13) : session.accountData.subscriptionId.substr(0, 13)}}
            </span>
            <ng-container dropdown placement="right">
              <a dropdownToggle aria-controls="drop-list"><i
                class="fa fa-ellipsis-v"></i></a>
              <div id="drop-list" *dropdownMenu class="dropdown-menu drop-list dropdown-menu-right"
                   role="menu" aria-labelledby="button-basic">
                <a (click)="editAccount(session);">Edit account</a>
                <a (click)="removeAccount(session);">Remove account</a>
                <a (click)="copyCredentials(session, 3);">Copy Account Number</a>
                <a (click)="copyCredentials(session, 4);">Copy Role ARN</a>
              </div>
            </ng-container>

            <a (click)="stopSession()" *ngIf="!session.loading && session.active"><i class="fa fa-stop"></i></a>
            <a (click)="startSession(session)" *ngIf="!session.loading && !session.active"><i class="fa fa-play"></i></a>
            <a *ngIf="session.loading"><i class="fa fa-spin fa-spinner"></i></a>

            <span><i class="dot {{session.active ? 'green' : 'gray'}}"></i></span>
          </div>
        </div>
    </li>
    </ng-container>
  </ul>

</div>
